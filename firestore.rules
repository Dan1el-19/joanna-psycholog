rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Allow read/write access to appointments collection
    // In production, you should add proper authentication and authorization
    match /appointments/{appointmentId} {
      // Allow anyone to create appointments (for form submissions)
      allow create: if true;
      
      // Temporarily allow all read/update operations for testing
      // TODO: Implement proper authentication in production
      allow read, update: if true;
      
      // Don't allow deleting appointments
      allow delete: if false;
    }

    // Allow write access to mail collection for email triggers
    match /mail/{emailId} {
      // Allow creating email documents (for sending emails)
      allow create: if true;
      
      // Don't allow reading, updating, or deleting email documents
      allow read, update, delete: if false;
    }
  }
}